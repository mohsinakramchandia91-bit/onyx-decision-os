<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ONYX Decision OS | Enterprise Offline AI & Decision Intelligence</title>
    
    <!-- SEO & Metadata -->
    <meta name="description" content="ONYX Decision OS v1.0. The premier Offline AI Decision Intelligence Platform for enterprise analytics, private AI modeling, and deterministic forecasting.">
    <meta name="keywords" content="Offline AI, Decision Intelligence Software, Enterprise Analytics, Private AI Platform, Data Science, SaaS">
    <meta property="og:title" content="ONYX Decision OS v1.0">
    <meta property="og:description" content="Enterprise-grade offline AI decision intelligence.">
    <meta property="og:type" content="website">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- DATA SCIENCE LIBRARIES (Browser-Compatible) -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://unpkg.com/simple-statistics@7.8.3/dist/simple-statistics.min.js"></script>

    <!-- Theme Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    },
                    colors: {
                        onyx: { bg: '#05070d', accent: '#00e5ff', surface: 'rgba(255, 255, 255, 0.03)', border: 'rgba(255, 255, 255, 0.08)' }
                    },
                    boxShadow: {
                        'neon': '0 0 15px rgba(0, 229, 255, 0.3)',
                        'neon-strong': '0 0 25px rgba(0, 229, 255, 0.6)',
                        'neon-hover': '0 0 35px rgba(0, 229, 255, 0.8)'
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #05070d; color: #ffffff; overflow-x: hidden; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #05070d; }
        ::-webkit-scrollbar-thumb { background: rgba(0, 229, 255, 0.3); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(0, 229, 255, 0.8); }

        .glass-panel {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .glow-text { text-shadow: 0 0 10px rgba(0, 229, 255, 0.5); }
        .hover-glow:hover {
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.4);
            border-color: rgba(0, 229, 255, 0.8);
            transition: all 0.3s ease;
        }

        .cta-primary {
            background-color: #00e5ff;
            color: #05070d;
            font-weight: 700;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 229, 255, 0.3);
        }
        .cta-primary:hover {
            background-color: #ffffff;
            box-shadow: 0 0 25px rgba(0, 229, 255, 0.8);
            transform: translateY(-2px);
        }

        /* Terminal specific */
        .terminal-log { color: #00e5ff; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        .cursor { display: inline-block; width: 8px; height: 16px; background-color: #00e5ff; animation: blink 1s step-end infinite; vertical-align: middle; margin-left: 4px; }

        .scanner-line {
            position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: #00e5ff; box-shadow: 0 0 10px #00e5ff;
            animation: scan 2s linear infinite; opacity: 0.5; pointer-events: none;
        }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

        /* SPA Routing */
        .view { display: none; opacity: 0; transition: opacity 0.3s ease; }
        .view.active { display: block; opacity: 1; }
        
        /* Drag & Drop Overlay */
        .drag-active { border-color: #00e5ff !important; background-color: rgba(0, 229, 255, 0.05) !important; }
    </style>
</head>
<body class="antialiased selection:bg-onyx-accent selection:text-onyx-bg flex flex-col min-h-screen">

    <!-- GLOBAL NAVIGATION -->
    <nav class="fixed w-full z-50 glass-panel border-b-0 border-white/10 backdrop-blur-xl" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <!-- Logo -->
                <div class="flex-shrink-0 cursor-pointer flex items-center gap-3" onclick="navigate('home')">
                    <div class="w-8 h-8 rounded bg-gradient-to-br from-onyx-accent to-blue-900 flex items-center justify-center shadow-neon">
                        <i class="fa-solid fa-layer-group text-onyx-bg text-sm"></i>
                    </div>
                    <span class="font-bold text-xl tracking-widest text-white">ONYX <span class="text-onyx-accent font-light">OS</span></span>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-6">
                    <button onclick="navigate('home')" class="text-gray-300 hover:text-onyx-accent text-sm font-medium transition-colors">Home</button>
                    <button onclick="navigate('product')" class="text-gray-300 hover:text-onyx-accent text-sm font-medium transition-colors">Product</button>
                    <button onclick="navigate('features')" class="text-gray-300 hover:text-onyx-accent text-sm font-medium transition-colors">Features</button>
                    <button onclick="navigate('security')" class="text-gray-300 hover:text-onyx-accent text-sm font-medium transition-colors">Security</button>
                    <button onclick="navigate('pricing')" class="text-gray-300 hover:text-onyx-accent text-sm font-medium transition-colors">Pricing</button>
                    <button onclick="navigate('about')" class="text-gray-300 hover:text-onyx-accent text-sm font-medium transition-colors">About</button>
                    <button onclick="navigate('lead-capture')" class="text-onyx-accent hover:text-white border border-onyx-accent/30 px-4 py-2 rounded text-sm font-medium transition-colors">Try Demo</button>
                    <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary text-sm py-2">Buy License</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN APP AREA -->
    <main class="flex-grow pt-20 relative">

        <!-- ==================== HOME VIEW ==================== -->
        <div id="view-home" class="view active min-h-[calc(100vh-5rem)] flex items-center py-20">
            <div class="absolute inset-0 z-0 opacity-10 pointer-events-none" style="background-image: radial-gradient(circle at 50% 50%, #00e5ff 0%, transparent 60%); mix-blend-mode: screen;"></div>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center">
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full glass-panel border-onyx-accent/30 text-onyx-accent text-xs font-mono uppercase tracking-widest mb-8 shadow-neon">
                    <span class="w-2 h-2 rounded-full bg-onyx-accent animate-pulse"></span>
                    Enterprise SaaS Deployment Ready
                </div>
                
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-extrabold tracking-tight mb-6 leading-tight">
                    Military-Grade <br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-white via-onyx-accent to-blue-500 glow-text">Decision Intelligence.</span>
                </h1>
                
                <p class="mt-6 max-w-3xl text-lg md:text-xl text-gray-400 mx-auto mb-10 font-light leading-relaxed">
                    Stop sending proprietary data to cloud APIs. ONYX Decision OS is a deterministic, offline data science engine that parses corporate vectors, models risk, and generates strategic forecasts entirely on your local hardware.
                </p>
                
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary text-lg">
                        <i class="fa-solid fa-key"></i> Buy Enterprise License
                    </a>
                    <button onclick="navigate('lead-capture')" class="glass-panel text-white hover:text-onyx-accent border border-white/20 hover:border-onyx-accent px-8 py-3 rounded-md font-bold text-lg transition-all flex items-center justify-center gap-3">
                        <i class="fa-solid fa-microchip"></i> Run Instant Demo
                    </button>
                </div>

                <div class="mt-20 pt-10 border-t border-white/5">
                    <p class="text-xs text-gray-500 uppercase tracking-widest mb-6 font-mono">Trusted architecture compatible with</p>
                    <div class="flex flex-wrap justify-center gap-8 opacity-50 grayscale">
                        <i class="fa-brands fa-aws text-4xl hover:grayscale-0 hover:opacity-100 transition-all"></i>
                        <i class="fa-brands fa-microsoft text-4xl hover:grayscale-0 hover:opacity-100 transition-all"></i>
                        <i class="fa-brands fa-apple text-4xl hover:grayscale-0 hover:opacity-100 transition-all"></i>
                        <i class="fa-brands fa-linux text-4xl hover:grayscale-0 hover:opacity-100 transition-all"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== PRODUCT OVERVIEW VIEW ==================== -->
        <div id="view-product" class="view py-24">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center max-w-3xl mx-auto mb-20">
                    <h2 class="text-sm font-bold text-onyx-accent tracking-widest uppercase mb-3 font-mono">The Platform</h2>
                    <h3 class="text-4xl md:text-5xl font-bold mb-6">What is ONYX Decision OS?</h3>
                    <p class="text-gray-400 text-lg font-light leading-relaxed">
                        ONYX is a standalone intelligence matrix built for executives and analysts. It ingests raw CSV datasets, applies deterministic statistical models, and translates raw numbers into strategic action plans without relying on external cloud infrastructure.
                    </p>
                </div>

                <!-- Comparison Table -->
                <div class="glass-panel rounded-xl overflow-hidden border-white/10 mb-20">
                    <div class="bg-black/50 px-6 py-4 border-b border-white/10">
                        <h4 class="font-mono text-sm uppercase text-gray-300 tracking-wider">Architecture Comparison</h4>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left border-collapse">
                            <thead>
                                <tr class="bg-white/5 text-xs uppercase tracking-wider text-gray-400 border-b border-white/5 font-mono">
                                    <th class="p-4">Feature</th>
                                    <th class="p-4 text-onyx-accent">ONYX Decision OS</th>
                                    <th class="p-4">Cloud AI Tools (ChatGPT, etc.)</th>
                                </tr>
                            </thead>
                            <tbody class="text-sm text-gray-300">
                                <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                                    <td class="p-4 font-bold">Data Processing Location</td>
                                    <td class="p-4 text-green-400"><i class="fa-solid fa-check mr-2"></i>100% Local Browser Sandbox</td>
                                    <td class="p-4 text-red-400"><i class="fa-solid fa-xmark mr-2"></i>External Corporate Servers</td>
                                </tr>
                                <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                                    <td class="p-4 font-bold">Network Requirement</td>
                                    <td class="p-4 text-green-400"><i class="fa-solid fa-check mr-2"></i>Works Fully Offline (Air-Gapped)</td>
                                    <td class="p-4 text-red-400"><i class="fa-solid fa-xmark mr-2"></i>Requires Constant Connection</td>
                                </tr>
                                <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                                    <td class="p-4 font-bold">Analytics Model</td>
                                    <td class="p-4 text-green-400"><i class="fa-solid fa-check mr-2"></i>Deterministic (Math & Stats)</td>
                                    <td class="p-4 text-yellow-400"><i class="fa-solid fa-triangle-exclamation mr-2"></i>Probabilistic (Hallucinations)</td>
                                </tr>
                                <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                                    <td class="p-4 font-bold">Data Retention Policy</td>
                                    <td class="p-4 text-green-400"><i class="fa-solid fa-check mr-2"></i>Zero Retention (Wiped on close)</td>
                                    <td class="p-4 text-red-400"><i class="fa-solid fa-xmark mr-2"></i>Used for LLM Training</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="text-center">
                    <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary text-lg">Buy License</a>
                </div>
            </div>
        </div>

        <!-- ==================== FEATURES VIEW ==================== -->
        <div id="view-features" class="view py-24 bg-[#030408]">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-20">
                    <h2 class="text-4xl font-bold mb-6">Enterprise Feature Matrix.</h2>
                    <p class="text-gray-400 text-lg max-w-2xl mx-auto">Built from the ground up to replace entire data science teams with a single deterministic application.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Feature 1 -->
                    <div class="glass-panel p-8 rounded-xl hover-glow transition-all">
                        <i class="fa-solid fa-database text-3xl text-onyx-accent mb-6"></i>
                        <h4 class="text-xl font-bold mb-3 text-white">CSV Intelligence Engine</h4>
                        <p class="text-gray-400 text-sm leading-relaxed">Drop raw unstructured exports directly into the UI. The engine heuristically identifies revenue, costs, and time vectors automatically.</p>
                    </div>
                    <!-- Feature 2 -->
                    <div class="glass-panel p-8 rounded-xl hover-glow transition-all">
                        <i class="fa-solid fa-triangle-exclamation text-3xl text-onyx-accent mb-6"></i>
                        <h4 class="text-xl font-bold mb-3 text-white">Risk Modeling System</h4>
                        <p class="text-gray-400 text-sm leading-relaxed">Calculates operational coefficient of variation to assign a 0-100 Risk Score, highlighting hidden instability in your P&L.</p>
                    </div>
                    <!-- Feature 3 -->
                    <div class="glass-panel p-8 rounded-xl hover-glow transition-all">
                        <i class="fa-solid fa-chart-line text-3xl text-onyx-accent mb-6"></i>
                        <h4 class="text-xl font-bold mb-3 text-white">Forecast Engine</h4>
                        <p class="text-gray-400 text-sm leading-relaxed">Deploys linear regression and moving average calculations to project 6, 12, and 24-month corporate trajectories.</p>
                    </div>
                    <!-- Feature 4 -->
                    <div class="glass-panel p-8 rounded-xl hover-glow transition-all">
                        <i class="fa-solid fa-chess-knight text-3xl text-onyx-accent mb-6"></i>
                        <h4 class="text-xl font-bold mb-3 text-white">Executive Decision AI</h4>
                        <p class="text-gray-400 text-sm leading-relaxed">Translates raw statistical output into actionable English. Generates exact capital allocation and operational restructuring recommendations.</p>
                    </div>
                    <!-- Feature 5 -->
                    <div class="glass-panel p-8 rounded-xl hover-glow transition-all">
                        <i class="fa-solid fa-shield-halved text-3xl text-onyx-accent mb-6"></i>
                        <h4 class="text-xl font-bold mb-3 text-white">Offline Architecture</h4>
                        <p class="text-gray-400 text-sm leading-relaxed">The entire logic executes in your browser's V8 engine. No servers, no APIs, zero potential for external data interception.</p>
                    </div>
                    <!-- Feature 6 -->
                    <div class="glass-panel p-8 rounded-xl hover-glow transition-all">
                        <i class="fa-solid fa-calculator text-3xl text-onyx-accent mb-6"></i>
                        <h4 class="text-xl font-bold mb-3 text-white">Deterministic Core</h4>
                        <p class="text-gray-400 text-sm leading-relaxed">Unlike LLMs which guess the next word, ONYX uses hard math (simple-statistics.js) guaranteeing identical, mathematically sound outputs every time.</p>
                    </div>
                    <!-- Feature 7 (Spans full width on mobile/tablet) -->
                    <div class="glass-panel p-8 rounded-xl hover-glow transition-all md:col-span-2 lg:col-span-3 lg:w-2/3 lg:mx-auto text-center border-onyx-accent/30 shadow-neon">
                        <i class="fa-solid fa-earth-americas text-3xl text-onyx-accent mb-6"></i>
                        <h4 class="text-xl font-bold mb-3 text-white">Universal Business Compatibility</h4>
                        <p class="text-gray-400 text-sm leading-relaxed">Agnostic to industry. Whether you upload SaaS MRR, E-commerce GMV, or Defense Contractor budget spreadsheets, the engine adapts its analysis dynamically.</p>
                        <div class="mt-6">
                            <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary">Buy License</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== SECURITY VIEW ==================== -->
        <div id="view-security" class="view py-24">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                    <div>
                        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full glass-panel border-red-500/30 text-red-400 text-xs font-mono uppercase tracking-widest mb-6">
                            <i class="fa-solid fa-lock"></i> Air-Gap Protocol Active
                        </div>
                        <h2 class="text-4xl md:text-5xl font-bold mb-6">Corporate espionage ends here.</h2>
                        <p class="text-gray-400 mb-6 font-light text-lg">
                            Uploading financial data to public AI models is a critical security vulnerability. ONYX Decision OS solves this by bringing the intelligence to the data, not the data to the cloud.
                        </p>
                        <ul class="space-y-6 mb-8 mt-10">
                            <li class="flex items-start gap-4">
                                <div class="w-10 h-10 rounded-full bg-onyx-accent/10 flex items-center justify-center border border-onyx-accent/30 shrink-0">
                                    <i class="fa-solid fa-server text-onyx-accent"></i>
                                </div>
                                <div>
                                    <strong class="block text-white text-lg">Zero Cloud Dependency</strong>
                                    <p class="text-sm text-gray-500 mt-1">Disconnect your WiFi. The application continues to function perfectly. Computation occurs entirely via local CPU/RAM allocation.</p>
                                </div>
                            </li>
                            <li class="flex items-start gap-4">
                                <div class="w-10 h-10 rounded-full bg-onyx-accent/10 flex items-center justify-center border border-onyx-accent/30 shrink-0">
                                    <i class="fa-solid fa-eye-slash text-onyx-accent"></i>
                                </div>
                                <div>
                                    <strong class="block text-white text-lg">No Telemetry or Tracking</strong>
                                    <p class="text-sm text-gray-500 mt-1">We do not track metrics, we do not log sessions, and we cannot access your files. Absolute opacity by design.</p>
                                </div>
                            </li>
                        </ul>
                        <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary">Buy License</a>
                    </div>
                    
                    <div class="relative">
                        <div class="absolute inset-0 bg-onyx-accent/5 blur-3xl rounded-full"></div>
                        <div class="glass-panel p-2 rounded-xl relative border-white/10 shadow-2xl">
                            <div class="bg-black rounded-lg p-6 border border-white/5 font-mono text-sm text-gray-400 h-80 overflow-hidden relative">
                                <div class="scanner-line"></div>
                                <div class="text-onyx-accent mb-4">> root@onyx-secure-enclave:~# verify_connection</div>
                                <div class="opacity-50">[SYSTEM] checking outbound ports...</div>
                                <div class="text-red-400">[SYSTEM] PORT 80 CLOSED</div>
                                <div class="text-red-400">[SYSTEM] PORT 443 CLOSED</div>
                                <div class="text-green-400 mt-2">[OK] EXTERNAL NETWORK SEVERED.</div>
                                <div class="opacity-50 mt-4">[SYSTEM] checking telemetry modules...</div>
                                <div class="text-green-400">[OK] TELEMETRY NULLIFIED.</div>
                                <div class="opacity-50 mt-4">[SYSTEM] memory wipe protocol...</div>
                                <div class="text-green-400">[OK] VOLATILE MEMORY PURGED ON EXIT.</div>
                                <div class="mt-6 text-onyx-accent font-bold glow-text animate-pulse">
                                    >> READY FOR SECURE DATA INGESTION <<
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== PRICING VIEW ==================== -->
        <div id="view-pricing" class="view py-24 bg-[#030408]">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center max-w-3xl mx-auto mb-16">
                    <h2 class="text-4xl md:text-5xl font-bold mb-6">Invest in Asymmetric Advantage.</h2>
                    <p class="text-gray-400 text-lg font-light">One-time payment. Lifetime access. Stop paying recurring SaaS fees for software you don't truly own.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                    <!-- Starter -->
                    <div class="glass-panel p-8 rounded-xl border-white/10 flex flex-col">
                        <h3 class="text-xl font-bold mb-2 text-white">Starter Node</h3>
                        <p class="text-gray-400 text-xs mb-6 h-8">For solo analysts and founders.</p>
                        <div class="text-4xl font-bold mb-6">$199 <span class="text-sm text-gray-500 font-normal">/ lifetime</span></div>
                        
                        <ul class="space-y-4 mb-8 flex-grow">
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> 1 User License</li>
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> Core CSV Engine</li>
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> Risk Modeling</li>
                            <li class="flex items-center gap-3 text-sm text-gray-600"><i class="fa-solid fa-xmark"></i> Forecast Modeling</li>
                            <li class="flex items-center gap-3 text-sm text-gray-600"><i class="fa-solid fa-xmark"></i> Priority Support</li>
                        </ul>
                        
                        <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="w-full text-center border border-white/20 hover:border-onyx-accent hover:text-onyx-accent px-4 py-3 rounded font-bold transition-all">Buy License</a>
                    </div>

                    <!-- Professional -->
                    <div class="glass-panel p-8 rounded-xl border-onyx-accent shadow-neon flex flex-col relative transform md:-translate-y-4 bg-onyx-accent/5">
                        <div class="absolute top-0 right-0 bg-onyx-accent text-onyx-bg text-[10px] font-bold px-3 py-1 rounded-bl-lg tracking-widest uppercase">Standard</div>
                        <h3 class="text-2xl font-bold mb-2 text-onyx-accent">Professional</h3>
                        <p class="text-gray-400 text-xs mb-6 h-8">For data teams and SMBs.</p>
                        <div class="text-5xl font-bold mb-6 text-white">$499 <span class="text-sm text-gray-500 font-normal">/ lifetime</span></div>
                        
                        <ul class="space-y-4 mb-8 flex-grow">
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> 5 User Licenses</li>
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> Full Analytics Engine</li>
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> Advanced Forecasting</li>
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> Email Support</li>
                        </ul>
                        
                        <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary w-full">Buy License</a>
                    </div>

                    <!-- Enterprise -->
                    <div class="glass-panel p-8 rounded-xl border-white/10 flex flex-col">
                        <h3 class="text-xl font-bold mb-2 text-white">Enterprise Site</h3>
                        <p class="text-gray-400 text-xs mb-6 h-8">For corp-wide deployment.</p>
                        <div class="text-4xl font-bold mb-6">$2,499 <span class="text-sm text-gray-500 font-normal">/ lifetime</span></div>
                        
                        <ul class="space-y-4 mb-8 flex-grow">
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> Unlimited Licenses</li>
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> White-label Reports</li>
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> Priority WhatsApp Support</li>
                            <li class="flex items-center gap-3 text-sm text-gray-300"><i class="fa-solid fa-check text-onyx-accent"></i> Custom Integrations</li>
                        </ul>
                        
                        <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="w-full text-center border border-white/20 hover:border-onyx-accent hover:text-onyx-accent px-4 py-3 rounded font-bold transition-all">Buy License</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== ABOUT VIEW ==================== -->
        <div id="view-about" class="view py-24">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <i class="fa-solid fa-layer-group text-6xl text-onyx-accent mb-8"></i>
                <h2 class="text-4xl font-bold mb-8">The ONYX Philosophy.</h2>
                <div class="space-y-6 text-gray-400 text-lg font-light leading-relaxed text-left border-l-2 border-onyx-accent pl-8">
                    <p>
                        We built ONYX Systems because we recognized a fundamental flaw in the modern SaaS ecosystem: <strong>Dependency.</strong>
                    </p>
                    <p>
                        Companies are uploading their most sensitive financial and operational data to third-party cloud LLMs. They are paying monthly subscriptions to rent access to algorithms. When the internet goes down, or the API changes pricing, business halts.
                    </p>
                    <p>
                        ONYX Decision OS v1.0 is a return to software ownership. It is a highly engineered, deterministic data science platform that runs entirely within the local sandbox of your machine. It utilizes mathematics, not hallucinating language models, to guarantee accurate strategic forecasting.
                    </p>
                    <p class="text-onyx-accent font-medium mt-8">
                        Deploy ONYX. Reclaim your data sovereignty.
                    </p>
                </div>
                <div class="mt-16">
                    <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary">Buy License</a>
                </div>
            </div>
        </div>

        <!-- ==================== LEAD CAPTURE VIEW ==================== -->
        <div id="view-lead-capture" class="view py-20 bg-[#030408]">
            <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8">
                <div class="glass-panel p-8 rounded-xl shadow-2xl border-white/10 relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-onyx-accent to-transparent"></div>
                    
                    <div class="text-center mb-8">
                        <h2 class="text-2xl font-bold text-white mb-2">Access Demo Engine</h2>
                        <p class="text-xs text-gray-400 font-mono">Register environment to initialize.</p>
                    </div>

                    <form id="lead-form" onsubmit="submitLead(event)" class="space-y-5">
                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase tracking-wide mb-1">Full Name</label>
                            <input type="text" id="lead-name" required class="w-full bg-black/50 border border-white/10 rounded px-4 py-3 text-sm text-white focus:outline-none focus:border-onyx-accent transition-colors">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase tracking-wide mb-1">Corporate Email</label>
                            <input type="email" id="lead-email" required class="w-full bg-black/50 border border-white/10 rounded px-4 py-3 text-sm text-white focus:outline-none focus:border-onyx-accent transition-colors">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase tracking-wide mb-1">Company</label>
                            <input type="text" id="lead-company" required class="w-full bg-black/50 border border-white/10 rounded px-4 py-3 text-sm text-white focus:outline-none focus:border-onyx-accent transition-colors">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase tracking-wide mb-1">Industry</label>
                            <select id="lead-industry" class="w-full bg-black/50 border border-white/10 rounded px-4 py-3 text-sm text-white focus:outline-none focus:border-onyx-accent appearance-none cursor-pointer">
                                <option>Finance & Banking</option>
                                <option>Software / Tech</option>
                                <option>Defense / Aerospace</option>
                                <option>E-Commerce / Retail</option>
                                <option>Healthcare</option>
                                <option>Other Enterprise</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full cta-primary mt-6 justify-center text-lg">Initialize Engine</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- ==================== AUTO DEMO / ANALYZE ENGINE VIEW ==================== -->
        <!-- This encompasses both the prompt's request for the Engine and the instant demo flow -->
        <div id="view-analyze" class="view py-12">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                
                <div class="flex justify-between items-end mb-8 border-b border-white/10 pb-4">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Run ONYX Instant Analysis</h2>
                        <p class="text-gray-400 font-mono text-sm">Offline Sandbox active. Upload valid CSV array.</p>
                    </div>
                    <button onclick="navigate('client-portal')" class="text-xs text-onyx-accent border border-onyx-accent/30 hover:bg-onyx-accent/10 px-3 py-1.5 rounded transition-all hidden" id="btn-portal-access">
                        View Client Portal <i class="fa-solid fa-arrow-right ml-1"></i>
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Uploader -->
                    <div class="lg:col-span-1">
                        <div class="glass-panel rounded-xl p-6 h-full flex flex-col border-white/10 relative overflow-hidden group transition-colors" id="drop-zone">
                            <h3 class="font-bold mb-4 font-mono text-sm uppercase text-gray-300 flex items-center gap-2">
                                <i class="fa-solid fa-database text-onyx-accent"></i> Ingestion Target
                            </h3>
                            
                            <input type="file" id="csv-upload" accept=".csv" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10">
                            
                            <div class="flex-grow border-2 border-dashed border-white/10 rounded-lg flex flex-col items-center justify-center p-8 text-center group-hover:border-onyx-accent/50 transition-colors bg-black/30">
                                <i class="fa-solid fa-cloud-arrow-up text-4xl text-gray-600 mb-4 group-hover:text-onyx-accent transition-colors"></i>
                                <span class="text-sm font-bold text-white mb-1">Select or Drop CSV</span>
                                <span class="text-xs text-gray-500">Auto-detects numeric structures</span>
                            </div>
                            
                            <div class="mt-4 text-[10px] text-gray-500 font-mono uppercase">
                                Supported inference: Revenue, Cost, Users, Profit, Dates.
                            </div>
                        </div>
                    </div>

                    <!-- Terminal Processing -->
                    <div class="lg:col-span-2">
                        <div class="glass-panel rounded-xl h-[400px] border-white/10 overflow-hidden flex flex-col shadow-2xl relative">
                            <!-- Header -->
                            <div class="bg-black/80 px-4 py-2 border-b border-white/5 flex items-center justify-between">
                                <div class="flex gap-2">
                                    <div class="w-3 h-3 rounded-full bg-red-500/50"></div>
                                    <div class="w-3 h-3 rounded-full bg-yellow-500/50"></div>
                                    <div class="w-3 h-3 rounded-full bg-green-500/50"></div>
                                </div>
                                <div class="text-[10px] font-mono text-gray-500">onyx_neural_parser_v1.exe</div>
                            </div>
                            
                            <!-- Body -->
                            <div class="flex-grow bg-[#020305] p-6 relative overflow-y-auto" id="terminal-screen">
                                <div class="scanner-line hidden" id="terminal-scanner"></div>
                                <div id="terminal-output" class="font-mono text-sm terminal-log space-y-1">
                                    <div class="text-gray-500">> SYSTEM STANDBY. AWAITING DATA PAYLOAD...<span class="cursor" id="idle-cursor"></span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                     <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary">Buy License for Full Access</a>
                </div>
            </div>
        </div>

        <!-- ==================== DASHBOARD VIEW (Engine Output) ==================== -->
        <div id="view-dashboard" class="view py-8">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                
                <!-- Dashboard Header -->
                <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-8 border-b border-white/10 pb-4 gap-4">
                    <div>
                        <h2 class="text-2xl font-bold flex items-center gap-3">
                            <i class="fa-solid fa-shield-check text-onyx-accent"></i>
                            Executive Intelligence Dashboard
                        </h2>
                        <div class="text-xs font-mono text-gray-500 mt-1 flex items-center gap-4">
                            <span>DATASET: <span id="dash-filename" class="text-white">none</span></span>
                            <span>ROWS PARSED: <span id="dash-rows" class="text-white">0</span></span>
                            <span class="px-2 py-0.5 bg-green-500/10 text-green-400 rounded border border-green-500/20">DETERMINISTIC MODEL</span>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="navigate('analyze')" class="text-xs bg-white/5 hover:bg-white/10 border border-white/10 px-3 py-1.5 rounded font-mono transition-colors">
                            <i class="fa-solid fa-rotate-right mr-1"></i> New Analysis
                        </button>
                        <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary text-xs py-1.5 px-3 shadow-none">Buy License</a>
                    </div>
                </div>

                <!-- KPI Cards -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="glass-panel p-4 rounded-lg border-white/5 border-l-2 border-l-blue-500 relative overflow-hidden">
                        <div class="text-[10px] text-gray-400 uppercase tracking-widest mb-1 font-mono">Analyzed Metric Base</div>
                        <div class="text-2xl font-bold text-white truncate" id="kpi-base-val">--</div>
                        <div class="text-xs mt-1 text-gray-500 font-mono" id="kpi-base-label">Identified Column</div>
                    </div>
                    
                    <div class="glass-panel p-4 rounded-lg border-white/5 border-l-2 border-l-green-500 relative overflow-hidden">
                        <div class="text-[10px] text-gray-400 uppercase tracking-widest mb-1 font-mono">Historical Trend / Growth</div>
                        <div class="text-2xl font-bold text-white" id="kpi-growth">--</div>
                        <div class="text-xs mt-1 font-mono" id="kpi-growth-sub">Linear Slope</div>
                    </div>
                    
                    <div class="glass-panel p-4 rounded-lg border-white/5 border-l-2 border-l-yellow-500 relative overflow-hidden">
                        <div class="text-[10px] text-gray-400 uppercase tracking-widest mb-1 font-mono">Statistical Volatility</div>
                        <div class="text-2xl font-bold text-white" id="kpi-volatility">--</div>
                        <div class="text-xs mt-1 text-gray-500 font-mono">Coefficient of Variation</div>
                    </div>
                    
                    <div class="glass-panel p-4 rounded-lg border-onyx-accent shadow-neon bg-onyx-accent/5 relative overflow-hidden">
                        <div class="text-[10px] text-onyx-accent uppercase tracking-widest mb-1 font-mono font-bold">Decision Confidence</div>
                        <div class="text-3xl font-extrabold text-white glow-text" id="kpi-confidence">--</div>
                        <div class="text-[10px] mt-1 text-gray-400 font-mono" id="kpi-risk-label">Risk Score: --</div>
                    </div>
                </div>

                <!-- Charts & Report Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    
                    <!-- Main Chart -->
                    <div class="lg:col-span-2 glass-panel rounded-xl p-5 border-white/10 flex flex-col">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-sm uppercase tracking-wider font-mono"><i class="fa-solid fa-chart-area text-onyx-accent mr-2"></i>Deterministic Forecast Model</h3>
                            <div class="flex gap-2 text-[10px] font-mono">
                                <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-white"></span> Historical</span>
                                <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-onyx-accent"></span> Regression Forecast</span>
                            </div>
                        </div>
                        <div class="flex-grow relative min-h-[300px] w-full">
                            <canvas id="mainChart"></canvas>
                        </div>
                    </div>

                    <!-- Executive Report -->
                    <div class="glass-panel rounded-xl p-0 border-white/10 flex flex-col overflow-hidden bg-gradient-to-b from-[#0a0f1a] to-[#05070d]">
                        <div class="bg-onyx-accent/10 px-5 py-3 border-b border-onyx-accent/20">
                            <h3 class="font-bold text-onyx-accent text-sm uppercase tracking-wider font-mono flex items-center gap-2">
                                <i class="fa-solid fa-file-signature"></i> Executive Recommendation
                            </h3>
                        </div>
                        <div class="p-5 flex-grow overflow-y-auto custom-scrollbar text-sm text-gray-300 leading-relaxed font-mono space-y-4" id="exec-report-content">
                            <!-- Dynamically generated text goes here -->
                            <div class="animate-pulse text-gray-600">Awaiting deterministic processing...</div>
                        </div>
                        <div class="bg-black/50 p-4 border-t border-white/5 text-center">
                             <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="w-full text-center border border-onyx-accent text-onyx-accent hover:bg-onyx-accent hover:text-black px-4 py-2 rounded text-xs font-bold transition-all block">Buy License to Export</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- ==================== CLIENT PORTAL VIEW ==================== -->
        <div id="view-client-portal" class="view py-20 bg-[#030408]">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center gap-4 mb-10 border-b border-white/10 pb-6">
                    <i class="fa-regular fa-address-card text-4xl text-onyx-accent"></i>
                    <div>
                        <h2 class="text-3xl font-bold">Client Workspace</h2>
                        <p class="text-gray-400 font-mono text-sm">Local environment session data.</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="md:col-span-1 glass-panel p-6 rounded-xl border-white/10">
                        <h3 class="font-mono text-sm text-gray-400 uppercase tracking-widest mb-4 border-b border-white/10 pb-2">Active Profile</h3>
                        <div id="cp-profile-data" class="space-y-3 font-mono text-sm">
                            <!-- Injected via JS -->
                            <div class="text-gray-500 text-xs">No local profile found. Please run the Try Demo flow.</div>
                        </div>
                        <button onclick="navigate('lead-capture')" class="mt-6 text-xs text-onyx-accent hover:text-white transition-colors"><i class="fa-solid fa-pen-to-square mr-1"></i> Edit Profile</button>
                    </div>
                    
                    <div class="md:col-span-2 glass-panel p-6 rounded-xl border-white/10">
                        <div class="flex justify-between items-center border-b border-white/10 pb-2 mb-4">
                            <h3 class="font-mono text-sm text-gray-400 uppercase tracking-widest">Saved Local Reports</h3>
                            <span class="text-[10px] bg-red-500/20 text-red-400 px-2 py-0.5 rounded border border-red-500/30">DEMO MODE</span>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="bg-black/40 p-3 rounded border border-white/5 flex justify-between items-center hover:border-onyx-accent/30 transition-colors">
                                <div class="flex items-center gap-3">
                                    <i class="fa-solid fa-file-pdf text-red-400"></i>
                                    <div>
                                        <div class="text-sm font-bold text-white">Q3_Revenue_Forecast.rep</div>
                                        <div class="text-[10px] text-gray-500 font-mono">Generated: Local Sandbox</div>
                                    </div>
                                </div>
                                <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="text-xs bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded transition-colors"><i class="fa-solid fa-lock mr-1 text-onyx-accent"></i> Unlock</a>
                            </div>
                            
                            <div class="bg-black/40 p-3 rounded border border-white/5 flex justify-between items-center hover:border-onyx-accent/30 transition-colors">
                                <div class="flex items-center gap-3">
                                    <i class="fa-solid fa-file-csv text-green-400"></i>
                                    <div>
                                        <div class="text-sm font-bold text-white">Churn_Risk_Matrix.rep</div>
                                        <div class="text-[10px] text-gray-500 font-mono">Generated: Local Sandbox</div>
                                    </div>
                                </div>
                                <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="text-xs bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded transition-colors"><i class="fa-solid fa-lock mr-1 text-onyx-accent"></i> Unlock</a>
                            </div>
                        </div>
                        
                        <div class="mt-8 pt-6 border-t border-white/5 text-center">
                            <p class="text-sm text-gray-400 mb-4">To save real persistent reports locally, purchase the full enterprise license.</p>
                            <a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="cta-primary">Buy License</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- GLOBAL FOOTER -->
    <footer class="border-t border-white/10 bg-[#020305] pt-12 pb-8 mt-auto z-40 relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center gap-2 mb-4">
                        <i class="fa-solid fa-layer-group text-onyx-accent"></i>
                        <span class="font-bold text-lg tracking-wider text-white">ONYX <span class="text-onyx-accent font-light">OS</span></span>
                    </div>
                    <p class="text-gray-500 text-sm max-w-sm">The leading deterministic offline decision intelligence platform for high-security enterprise environments.</p>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-4 text-xs uppercase tracking-wider font-mono">Platform</h4>
                    <ul class="space-y-2 text-sm text-gray-500">
                        <li><button onclick="navigate('product')" class="hover:text-onyx-accent transition-colors">Product</button></li>
                        <li><button onclick="navigate('features')" class="hover:text-onyx-accent transition-colors">Features</button></li>
                        <li><button onclick="navigate('security')" class="hover:text-onyx-accent transition-colors">Security</button></li>
                        <li><button onclick="navigate('pricing')" class="hover:text-onyx-accent transition-colors">Pricing</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-4 text-xs uppercase tracking-wider font-mono">Connect</h4>
                    <ul class="space-y-2 text-sm text-gray-500">
                        <li><a href="https://wa.me/923201847179?text=I%20want%20ONYX%20Decision%20OS%20demo" target="_blank" class="hover:text-green-400 transition-colors flex items-center gap-2"><i class="fa-brands fa-whatsapp"></i> WhatsApp Demo</a></li>
                        <li><a href="https://facebook.com/ONYXSystems" target="_blank" class="hover:text-blue-400 transition-colors flex items-center gap-2"><i class="fa-brands fa-facebook"></i> Facebook</a></li>
                        <li><a href="https://onyxdecision.gumroad.com/l/hdzwvf" target="_blank" class="hover:text-onyx-accent transition-colors flex items-center gap-2"><i class="fa-solid fa-cart-shopping"></i> Gumroad</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-white/5 pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-gray-600 font-mono">
                <p>&copy; 2026 ONYX Systems. All rights reserved.</p>
                <p class="mt-2 md:mt-0">VERSION: ONYX Decision OS SaaS Core</p>
            </div>
        </div>
    </footer>

    <!-- FLOATING WHATSAPP BUTTON -->
    <a href="https://wa.me/923201847179?text=I%20want%20ONYX%20Decision%20OS%20demo" target="_blank" class="fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full bg-[#25D366] text-white flex items-center justify-center text-3xl transition-transform hover:scale-110" style="box-shadow: 0 0 20px rgba(37,211,102,0.6);">
        <i class="fa-brands fa-whatsapp"></i>
    </a>

    <!-- JS APPLICATION ARCHITECTURE -->
    <script>
        /**
         * ONYX DECISION OS - ENTERPRISE SAAS SPA
         */

        // ==========================================
        // MODULE: STATE & GLOBALS
        // ==========================================
        const AppState = {
            currentFileName: '',
            parsedData: [],
            extractedMetrics: {
                primaryColumnName: null,
                primaryData: [],
                labels: [],
                sum: 0,
                mean: 0,
                stdDev: 0,
                volatility: 0,
                slope: 0,
                growthRate: 0,
                riskScore: 0,
                confidenceScore: 0,
                forecast: []
            },
            chartInstance: null
        };

        // ==========================================
        // MODULE: ROUTER
        // ==========================================
        function navigate(viewId) {
            document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
            document.getElementById('view-' + viewId).classList.add('active');
            window.scrollTo(0,0);
            
            // Check portal data on relevant views
            if(viewId === 'client-portal' || viewId === 'analyze') {
                checkLocalProfile();
            }
        }

        // ==========================================
        // MODULE: LEAD CAPTURE & PORTAL
        // ==========================================
        function submitLead(e) {
            e.preventDefault();
            const profile = {
                name: document.getElementById('lead-name').value,
                email: document.getElementById('lead-email').value,
                company: document.getElementById('lead-company').value,
                industry: document.getElementById('lead-industry').value,
                date: new Date().toLocaleDateString()
            };
            
            // Save to browser
            localStorage.setItem('onyx_lead_profile', JSON.stringify(profile));
            
            // Route to engine
            navigate('analyze');
            
            // Optional: simulate typing welcome in terminal
            setTimeout(() => {
                Terminal.log(`> AUTHENTICATED LOCAL SESSION FOR: ${profile.name.toUpperCase()}`, 'success', 0);
            }, 500);
        }

        function checkLocalProfile() {
            const data = localStorage.getItem('onyx_lead_profile');
            const portalBtn = document.getElementById('btn-portal-access');
            const profileDiv = document.getElementById('cp-profile-data');
            
            if(data) {
                if(portalBtn) portalBtn.classList.remove('hidden');
                const p = JSON.parse(data);
                if(profileDiv) {
                    profileDiv.innerHTML = `
                        <div class="text-onyx-accent font-bold">${p.name}</div>
                        <div class="text-white">${p.email}</div>
                        <div class="text-gray-400 mt-2">CORP: <span class="text-white">${p.company}</span></div>
                        <div class="text-gray-400">SECT: <span class="text-white">${p.industry}</span></div>
                        <div class="text-[10px] text-green-400 mt-2">SESSION SECURE / OFFLINE</div>
                    `;
                }
            }
        }

        // ==========================================
        // MODULE: TERMINAL UI CONTROLLER (from Lite Engine)
        // ==========================================
        const Terminal = {
            element: document.getElementById('terminal-output'),
            scanner: document.getElementById('terminal-scanner'),
            
            clear() {
                this.element.innerHTML = '';
            },
            
            async log(message, type = 'info', delay = 300) {
                const cursor = document.getElementById('idle-cursor');
                if(cursor) cursor.remove();

                const line = document.createElement('div');
                if(type === 'error') line.className = 'text-red-400';
                else if(type === 'success') line.className = 'text-green-400 font-bold';
                else if(type === 'warn') line.className = 'text-yellow-400';
                else line.className = 'text-gray-300';
                
                this.element.appendChild(line);
                
                for(let i=0; i<=message.length; i++){
                    line.innerHTML = message.substring(0, i) + (i < message.length ? '<span class="cursor"></span>' : '');
                    await new Promise(r => setTimeout(r, 10));
                }
                
                line.innerHTML = message + '<span class="cursor" id="idle-cursor"></span>';
                this.element.parentElement.scrollTop = this.element.parentElement.scrollHeight;
                if(delay > 0) await new Promise(r => setTimeout(r, delay));
            },

            startScan() { this.scanner.classList.remove('hidden'); },
            stopScan() { this.scanner.classList.add('hidden'); }
        };

        // ==========================================
        // MODULE: METRIC EXTRACTOR (Data Science)
        // ==========================================
        const Extractor = {
            targetKeywords: ['revenue', 'sales', 'mrr', 'arr', 'profit', 'income', 'value', 'total', 'users', 'amount'],
            dateKeywords: ['date', 'time', 'month', 'year', 'period', 'day'],

            analyzeStructure(data, meta) {
                if(!data || data.length === 0 || !meta.fields) throw new Error("Dataset is empty or malformed.");
                
                let primaryCol = null;
                let dateCol = null;

                for (let field of meta.fields) {
                    const cleanField = field.toLowerCase().trim();
                    if (!primaryCol && this.targetKeywords.some(kw => cleanField.includes(kw))) primaryCol = field;
                    if (!dateCol && this.dateKeywords.some(kw => cleanField.includes(kw))) dateCol = field;
                }

                if (!primaryCol) {
                    for(let field of meta.fields) {
                        const val = parseFloat(String(data[0][field]).replace(/[^0-9.-]+/g,""));
                        if(!isNaN(val)) { primaryCol = field; break; }
                    }
                }

                if(!primaryCol) throw new Error("NO COMPUTABLE VECTORS DETECTED. File requires numeric columns.");

                const rawValues = [];
                const labels = [];
                
                data.forEach((row, index) => {
                    let rawVal = row[primaryCol];
                    if(rawVal !== undefined && rawVal !== null && rawVal !== '') {
                        let num = parseFloat(String(rawVal).replace(/[^0-9.-]+/g,""));
                        if(!isNaN(num)) {
                            rawValues.push(num);
                            labels.push(dateCol && row[dateCol] ? String(row[dateCol]).trim() : `t-${index}`);
                        }
                    }
                });

                if(rawValues.length < 3) throw new Error("INSUFFICIENT DATA MASS. Minimum 3 valid rows required for statistical modeling.");

                return { primaryCol, rawValues, labels };
            },

            computeMath(values) {
                const sum = ss.sum(values);
                const mean = ss.mean(values);
                const stdDev = ss.standardDeviation(values);
                const volatility = mean === 0 ? 0 : (stdDev / Math.abs(mean));
                
                const dataPoints = values.map((y, i) => [i, y]);
                const regression = ss.linearRegression(dataPoints);
                const slope = regression.m;
                
                const lineStart = ss.linearRegressionLine(regression)(0);
                const lineEnd = ss.linearRegressionLine(regression)(values.length - 1);
                let growthRate = 0;
                if(lineStart !== 0) {
                    growthRate = ((lineEnd - lineStart) / Math.abs(lineStart)) * 100;
                }

                return { sum, mean, stdDev, volatility, slope, growthRate, regressionLine: ss.linearRegressionLine(regression) };
            }
        };

        // ==========================================
        // MODULE: RISK & FORECAST MODELS
        // ==========================================
        const Models = {
            calculateRiskAndConfidence(volatility, growthRate) {
                let risk = (volatility * 50);
                if (growthRate < 0) risk += Math.abs(growthRate) * 2;
                if (growthRate > 100) risk += 10;
                risk = Math.max(0, Math.min(100, Math.round(risk)));
                let confidence = 98 - (risk * 0.7);
                confidence = Math.max(10, Math.min(99, confidence));
                return { risk, confidence };
            },

            generateForecast(values, regLineFunc, steps = 6) {
                const forecastData = [];
                const len = values.length;
                for(let i = 0; i < steps; i++) {
                    forecastData.push(regLineFunc(len + i));
                }
                return forecastData;
            }
        };

        // ==========================================
        // MODULE: REPORT GENERATOR
        // ==========================================
        const ReportGenerator = {
            build(state) {
                const { primaryColumnName, mean, growthRate, volatility, riskScore, confidenceScore } = state;
                let trendTxt = growthRate >= 0 ? 
                    `<span class="text-green-400">Positive trend sequence identified (+${growthRate.toFixed(1)}% trajectory).</span>` : 
                    `<span class="text-red-400">Negative degradation identified (${growthRate.toFixed(1)}% trajectory).</span>`;

                let volTxt = volatility < 0.2 ? "Variance is highly stable." : 
                             volatility < 0.5 ? "Moderate market variance detected." : 
                             "Extreme dataset volatility. Predictive models may degrade rapidly.";

                let actionTxt = "";
                if(riskScore < 30) actionTxt = "SYSTEM RECOMMENDATION: Aggressive allocation of capital recommended. Market mechanics demonstrate high stability and positive yield.";
                else if (riskScore < 60) actionTxt = "SYSTEM RECOMMENDATION: Maintain current operational tempo. Optimize secondary efficiencies before scaling.";
                else actionTxt = "SYSTEM RECOMMENDATION: IMMEDIATE RESTRUCTURING REQUIRED. Identify operational bottlenecks causing variance. Hedge against projected downturns.";

                return `
                    <p class="border-l-2 border-onyx-accent pl-3">> ANALYZING VECTOR: [${primaryColumnName.toUpperCase()}]</p>
                    <p>> Baseline statistical mean established at: ${this.formatCurrency(mean)}</p>
                    <p>> TREND ANALYSIS: ${trendTxt} ${volTxt}</p>
                    <p>> RISK ASSESSMENT: Computed risk tensor is ${riskScore}/100. (Confidence: ${confidenceScore.toFixed(1)}%)</p>
                    <div class="mt-4 p-3 bg-onyx-accent/10 border border-onyx-accent/30 rounded text-onyx-accent font-bold">
                        ${actionTxt}
                    </div>
                `;
            },
            formatCurrency(val) {
                if(Math.abs(val) >= 1000000) return (val/1000000).toFixed(2) + 'M';
                if(Math.abs(val) >= 1000) return (val/1000).toFixed(2) + 'K';
                return val.toFixed(2);
            }
        };

        // ==========================================
        // MODULE: CORE ENGINE
        // ==========================================
        const Engine = {
            async processCSV(file) {
                AppState.currentFileName = file.name;
                Terminal.clear();
                Terminal.startScan();
                
                await Terminal.log(`> INITIATING SECURE LOCAL INGESTION...`);
                await Terminal.log(`> MOUNTING FILE: ${file.name}`);
                
                Papa.parse(file, {
                    header: true,
                    skipEmptyLines: true,
                    complete: async (results) => {
                        try {
                            await Terminal.log(`> FILE PARSED IN BROWSER SANDBOX. (Rows: ${results.data.length})`);
                            await Terminal.log(`> RUNNING HEURISTIC VECTOR DETECTION...`);
                            
                            const { primaryCol, rawValues, labels } = Extractor.analyzeStructure(results.data, results.meta);
                            await Terminal.log(`> [OK] PRIMARY TENSOR IDENTIFIED: ${primaryCol}`, 'success');
                            
                            await Terminal.log(`> EXECUTING STATISTICAL MATH MODELS...`);
                            const stats = Extractor.computeMath(rawValues);
                            
                            await Terminal.log(`> GENERATING RISK AND CONFIDENCE VECTORS...`);
                            const { risk, confidence } = Models.calculateRiskAndConfidence(stats.volatility, stats.growthRate);
                            const forecast = Models.generateForecast(rawValues, stats.regressionLine, 6);

                            AppState.extractedMetrics = {
                                primaryColumnName: primaryCol,
                                primaryData: rawValues,
                                labels: labels,
                                ...stats,
                                riskScore: risk,
                                confidenceScore: confidence,
                                forecast: forecast
                            };

                            await Terminal.log(`> DETERMINISTIC ENGINE COMPLETE.`, 'success');
                            await Terminal.log(`> COMPILING EXECUTIVE DASHBOARD...`);
                            
                            Terminal.stopScan();
                            setTimeout(() => {
                                UIController.renderDashboard();
                                navigate('dashboard');
                            }, 800);

                        } catch (error) {
                            Terminal.stopScan();
                            await Terminal.log(`> [FATAL ERROR] ${error.message}`, 'error');
                            await Terminal.log(`> ABORTING ANALYSIS.`);
                        }
                    },
                    error: async (err) => {
                        Terminal.stopScan();
                        await Terminal.log(`> [IO ERROR] CSV read failed: ${err.message}`, 'error');
                    }
                });
            }
        };

        // ==========================================
        // MODULE: UI & CHART CONTROLLER
        // ==========================================
        const UIController = {
            renderDashboard() {
                const metrics = AppState.extractedMetrics;
                document.getElementById('dash-filename').textContent = AppState.currentFileName;
                document.getElementById('dash-rows').textContent = metrics.primaryData.length;
                document.getElementById('kpi-base-val').textContent = ReportGenerator.formatCurrency(metrics.sum);
                document.getElementById('kpi-base-label').textContent = `Total ${metrics.primaryColumnName}`;
                
                const growthEl = document.getElementById('kpi-growth');
                growthEl.textContent = `${metrics.growthRate > 0 ? '+' : ''}${metrics.growthRate.toFixed(2)}%`;
                growthEl.className = `text-2xl font-bold ${metrics.growthRate >= 0 ? 'text-green-400' : 'text-red-400'}`;
                
                document.getElementById('kpi-volatility').textContent = metrics.volatility.toFixed(3);
                document.getElementById('kpi-confidence').textContent = `${metrics.confidenceScore.toFixed(1)}%`;
                document.getElementById('kpi-risk-label').textContent = `Risk Tensor: ${metrics.riskScore}`;
                document.getElementById('exec-report-content').innerHTML = ReportGenerator.build(metrics);

                this.renderChart(metrics);
            },
            renderChart(metrics) {
                const ctx = document.getElementById('mainChart').getContext('2d');
                if (AppState.chartInstance) AppState.chartInstance.destroy();

                const historyLen = metrics.primaryData.length;
                const forecastLen = metrics.forecast.length;
                const fullLabels = [...metrics.labels];
                for(let i=1; i<=forecastLen; i++) fullLabels.push(`FCST+${i}`);
                const historicalData = [...metrics.primaryData, ...Array(forecastLen).fill(null)];
                const forecastData = Array(historyLen - 1).fill(null);
                forecastData.push(metrics.primaryData[historyLen - 1]);
                forecastData.push(...metrics.forecast);

                Chart.defaults.color = '#888';
                Chart.defaults.font.family = 'JetBrains Mono';

                AppState.chartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: fullLabels,
                        datasets: [
                            {
                                label: metrics.primaryColumnName.toUpperCase(),
                                data: historicalData,
                                borderColor: '#ffffff',
                                backgroundColor: 'rgba(255,255,255,0.1)',
                                borderWidth: 2,
                                pointRadius: 3,
                                pointBackgroundColor: '#00e5ff',
                                tension: 0.3,
                                fill: true
                            },
                            {
                                label: 'REGRESSION FORECAST',
                                data: forecastData,
                                borderColor: '#00e5ff',
                                borderDash: [5, 5],
                                borderWidth: 2,
                                pointRadius: 0,
                                tension: 0.3
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: { intersect: false, mode: 'index' },
                        plugins: { legend: { display: false } },
                        scales: {
                            y: {
                                grid: { color: 'rgba(255,255,255,0.05)' },
                                ticks: { callback: function(value) { return ReportGenerator.formatCurrency(value); } }
                            },
                            x: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { maxTicksLimit: 12 } }
                        }
                    }
                });
            }
        };

        // ==========================================
        // INITIALIZATION & EVENT LISTENERS
        // ==========================================
        const fileInput = document.getElementById('csv-upload');
        const dropZone = document.getElementById('drop-zone');

        if(fileInput) {
            fileInput.addEventListener('change', (e) => {
                if(e.target.files.length > 0) Engine.processCSV(e.target.files[0]);
            });
        }

        if(dropZone) {
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('drag-active');
            });
            ['dragleave', 'dragend', 'drop'].forEach(evt => {
                dropZone.addEventListener(evt, () => {
                    dropZone.classList.remove('drag-active');
                });
            });
        }
        
        // Load initial state
        window.addEventListener('DOMContentLoaded', () => {
            checkLocalProfile();
        });

    </script>
</body>
</html>
